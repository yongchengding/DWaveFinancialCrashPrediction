import networkx as nx
from dwave_qbsolv import QBSolv
from dwave.system.samplers import DWaveSampler
from dwave.system.composites import FixedEmbeddingComposite
import minorminer

# define (sub)problem size
solver_limit = 20
qubo_size = 70

data=open('D:\linearwrite.txt','w+')

# find embedding of subproblem-sized complete graph to the QPU
G = nx.complete_graph(solver_limit)
system = DWaveSampler()
embedding = minorminer.find_embedding(G.edges, system.edgelist)


# solve a random problem
Q = {('x000','x001'):4.,('x000','x002'):8.,('x000','x003'):16.,('x000','x004'):32.,('x000','x005'):64.,('x000','x006'):128.,('x000','x000'):-65.2964,('x001','x002'):16.,('x001','x003'):32.,('x001','x004'):64.,('x001','x005'):128.,('x001','x006'):256.,('x001','x001'):-128.593,('x002','x003'):64.,('x002','x004'):128.,('x002','x005'):256.,('x002','x006'):512.,('x002','x002'):-249.186,('x003','x004'):256.,('x003','x005'):512.,('x003','x006'):1024.,('x003','x003'):-466.371,('x004','x005'):1024.,('x004','x006'):2048.,('x004','x004'):-804.742,('x005','x006'):4096.,('x005','x005'):-1097.48,('x006','x006'):-146.969,('x007','x008'):4.,('x007','x009'):8.,('x007','x010'):16.,('x007','x011'):32.,('x007','x012'):64.,('x007','x013'):128.,('x007','x007'):-74.3404,('x008','x009'):16.,('x008','x010'):32.,('x008','x011'):64.,('x008','x012'):128.,('x008','x013'):256.,('x008','x008'):-146.681,('x009','x010'):64.,('x009','x011'):128.,('x009','x012'):256.,('x009','x013'):512.,('x009','x009'):-285.362,('x010','x011'):256.,('x010','x012'):512.,('x010','x013'):1024.,('x010','x010'):-538.723,('x011','x012'):1024.,('x011','x013'):2048.,('x011','x011'):-949.447,('x012','x013'):4096.,('x012','x012'):-1386.89,('x013','x013'):-725.787,('x014','x015'):4.,('x014','x016'):8.,('x014','x017'):16.,('x014','x018'):32.,('x014','x019'):64.,('x014','x020'):128.,('x014','x014'):-85.5481,('x015','x016'):16.,('x015','x017'):32.,('x015','x018'):64.,('x015','x019'):128.,('x015','x020'):256.,('x015','x015'):-169.096,('x016','x017'):64.,('x016','x018'):128.,('x016','x019'):256.,('x016','x020'):512.,('x016','x016'):-330.192,('x017','x018'):256.,('x017','x019'):512.,('x017','x020'):1024.,('x017','x017'):-628.385,('x018','x019'):1024.,('x018','x020'):2048.,('x018','x018'):-1128.77,('x019','x020'):4096.,('x019','x019'):-1745.54,('x020','x020'):-1443.08,('x021','x022'):4.,('x021','x023'):8.,('x021','x024'):16.,('x021','x025'):32.,('x021','x026'):64.,('x021','x027'):128.,('x021','x021'):-91.4379,('x022','x023'):16.,('x022','x024'):32.,('x022','x025'):64.,('x022','x026'):128.,('x022','x027'):256.,('x022','x022'):-180.876,('x023','x024'):64.,('x023','x025'):128.,('x023','x026'):256.,('x023','x027'):512.,('x023','x023'):-353.752,('x024','x025'):256.,('x024','x026'):512.,('x024','x027'):1024.,('x024','x024'):-675.504,('x025','x026'):1024.,('x025','x027'):2048.,('x025','x025'):-1223.01,('x026','x027'):4096.,('x026','x026'):-1934.01,('x027','x027'):-1820.03,('x028','x029'):4.,('x028','x030'):8.,('x028','x031'):16.,('x028','x032'):32.,('x028','x033'):64.,('x028','x034'):128.,('x028','x028'):-86.6187,('x029','x030'):16.,('x029','x031'):32.,('x029','x032'):64.,('x029','x033'):128.,('x029','x034'):256.,('x029','x029'):-171.237,('x030','x031'):64.,('x030','x032'):128.,('x030','x033'):256.,('x030','x034'):512.,('x030','x030'):-334.475,('x031','x032'):256.,('x031','x033'):512.,('x031','x034'):1024.,('x031','x031'):-636.95,('x032','x033'):1024.,('x032','x034'):2048.,('x032','x032'):-1145.9,('x033','x034'):4096.,('x033','x033'):-1779.8,('x034','x034'):-1511.6,('x035','x036'):4.,('x035','x037'):8.,('x035','x038'):16.,('x035','x039'):32.,('x035','x040'):64.,('x035','x041'):128.,('x035','x035'):-41.2279,('x036','x037'):16.,('x036','x038'):32.,('x036','x039'):64.,('x036','x040'):128.,('x036','x041'):256.,('x036','x036'):-80.4558,('x037','x038'):64.,('x037','x039'):128.,('x037','x040'):256.,('x037','x041'):512.,('x037','x037'):-152.912,('x038','x039'):256.,('x038','x040'):512.,('x038','x041'):1024.,('x038','x038'):-273.823,('x039','x040'):1024.,('x039','x041'):2048.,('x039','x039'):-419.647,('x040','x041'):4096.,('x040','x040'):-327.293,('x041','x041'):1393.41,('x042','x043'):4.,('x042','x044'):8.,('x042','x045'):16.,('x042','x046'):32.,('x042','x047'):64.,('x042','x048'):128.,('x042','x042'):-55.1935,('x043','x044'):16.,('x043','x045'):32.,('x043','x046'):64.,('x043','x047'):128.,('x043','x048'):256.,('x043','x043'):-108.387,('x044','x045'):64.,('x044','x046'):128.,('x044','x047'):256.,('x044','x048'):512.,('x044','x044'):-208.774,('x045','x046'):256.,('x045','x047'):512.,('x045','x048'):1024.,('x045','x045'):-385.548,('x046','x047'):1024.,('x046','x048'):2048.,('x046','x046'):-643.096,('x047','x048'):4096.,('x047','x047'):-774.193,('x048','x048'):499.614,('x049','x050'):4.,('x049','x051'):8.,('x049','x052'):16.,('x049','x053'):32.,('x049','x054'):64.,('x049','x055'):128.,('x049','x049'):-53.3037,('x050','x051'):16.,('x050','x052'):32.,('x050','x053'):64.,('x050','x054'):128.,('x050','x055'):256.,('x050','x050'):-104.607,('x051','x052'):64.,('x051','x053'):128.,('x051','x054'):256.,('x051','x055'):512.,('x051','x051'):-201.215,('x052','x053'):256.,('x052','x054'):512.,('x052','x055'):1024.,('x052','x052'):-370.43,('x053','x054'):1024.,('x053','x055'):2048.,('x053','x053'):-612.859,('x054','x055'):4096.,('x054','x054'):-713.718,('x055','x055'):620.563,('x056','x057'):4.,('x056','x058'):8.,('x056','x059'):16.,('x056','x060'):32.,('x056','x061'):64.,('x056','x062'):128.,('x056','x056'):-107.381,('x057','x058'):16.,('x057','x059'):32.,('x057','x060'):64.,('x057','x061'):128.,('x057','x062'):256.,('x057','x057'):-212.763,('x058','x059'):64.,('x058','x060'):128.,('x058','x061'):256.,('x058','x062'):512.,('x058','x058'):-417.526,('x059','x060'):256.,('x059','x061'):512.,('x059','x062'):1024.,('x059','x059'):-803.052,('x060','x061'):1024.,('x060','x062'):2048.,('x060','x060'):-1478.1,('x061','x062'):4096.,('x061','x061'):-2444.21,('x062','x062'):-2840.41,('x063','x064'):4.,('x063','x065'):8.,('x063','x066'):16.,('x063','x067'):32.,('x063','x068'):64.,('x063','x069'):128.,('x063','x063'):-73.3887,('x064','x065'):16.,('x064','x066'):32.,('x064','x067'):64.,('x064','x068'):128.,('x064','x069'):256.,('x064','x064'):-144.777,('x065','x066'):64.,('x065','x067'):128.,('x065','x068'):256.,('x065','x069'):512.,('x065','x065'):-281.555,('x066','x067'):256.,('x066','x068'):512.,('x066','x069'):1024.,('x066','x066'):-531.109,('x067','x068'):1024.,('x067','x069'):2048.,('x067','x067'):-934.219,('x068','x069'):4096.,('x068','x068'):-1356.44,('x069','x069'):-664.875}
response = QBSolv().sample_qubo(Q, solver=FixedEmbeddingComposite(system, embedding), solver_limit=solver_limit)
#print("Q=" + str(Q))
print("samples=" + str(list(response.samples())),file=data)
#print("energies=" + str(list(response.data_vectors['energy'])))
data.close()